import serial
import json
start = True

data = {}
path = './Desktop'
fileName = 'curling'
ser = serial.Serial('/dev/ttyACM0', 9600) #serial port USB is connected to, baudrate
ser.flushInput() #clears the input buffer
liste = [0,0,0] #contains values for acceleration, gyro and conductanse
x = 0

while start:
    #Serial reads one value a time, and we have 3 values for each update
    #saves the 3 values in 'liste' and then we use them to update the dictionary
    for x in range(3):
        inputValue = ser.read(1)  #reads serial input
        valueOut = ord(inputValue) 
        liste[x] = valueOut
        
    data['aks'] = liste[0]
    data['gyro'] = liste[1]
    data['cond'] = liste[2]
    
    
    #here we are writing the dictionary to a json file    
    with open('curling.json', 'w') as outfile:
        json.dump(data, outfile)
            
        
    with open('curling.json', 'r') as infile:
        data = json.load(infile)
        print(data)
    

